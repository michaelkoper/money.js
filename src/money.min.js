this.Money=function(){function e(t,n,r){this.options=r||{};this.currency=e.currencies[n]||e.currencies[e.defaultCurrency];if(typeof t==="string"||t instanceof String){this.cents=Math.round(t.replace(/\,/,".")*this.currency.factor)}else if(typeof t==="number"||t instanceof Number){this.cents=Math.round(t)}else{this.cents=0}}e.currencies={EUR:{fixed:2,name:"euro",factor:100,separator:",",thousands:".",format:function(e){return""+e+" €"}},USD:{fixed:2,name:"dollar",factor:100,separator:".",thousands:",",format:function(e){return"$"+e}},GBP:{fixed:2,name:"British Pound",factor:100,separator:".",thousands:",",format:function(e){return"£"+e}}};e.defaultCurrency="EUR";e.prototype.toString=function(e){var t,n,r,i,s,o,u,a;e=e||{};i=!e.no_cents?this.currency.fixed:0;t=this.cents/this.currency.factor;s=t<0?"-":"";a=parseInt(t=Math.abs(+t||0).toFixed(i))+"";n=(n=a.length)>3?n%3:0;o=n?a.substr(0,n)+this.currency.thousands:"";u=a.substr(n).replace(/(\d{3})(?=\d)/g,"$1"+this.currency.thousands);r=i?this.currency.separator+Math.abs(t-a).toFixed(i).slice(2):"";return s+o+u+r};e.prototype.formatted=function(e){return this.currency.format(this.toString(e))};e.prototype.dup=function(){return new e(this.cents,this.currency)};e.prototype.add=function(t){return new e(this.cents+t.toMoney(this.currency).cents,this.currency)};e.prototype.subtract=function(t){return new e(this.cents-t.toMoney(this.currency).cents,this.currency)};e.prototype.multiply=function(t){return new e(Math.round(this.cents*t),this.currency)};e.prototype.divide=function(t){return new e(Math.round(this.cents/t),this.currency)};e.prototype.isEqual=function(e){return this.cents===e.cents&&this.currency===e.currency};e.prototype.isBiggerThan=function(e){return this.cents>e.cents};e.prototype.isBiggerOrEqualThan=function(e){return this.cents>=e.cents};e.prototype.isSmallerThan=function(e){return this.cents<e.cents};e.prototype.isSmallerOrEqualThan=function(e){return this.cents<=e.cents};e.prototype.isPositive=function(){return this.cents>0};e.prototype.isNegative=function(){return this.cents<0};e.prototype.isZero=function(){return this.cents===0};return e}();Number.prototype.toMoney=function(e){var t;t=Money.currencies[e]||Money.currencies[Money.defaultCurrency];return new Money(this,e)};String.prototype.toMoney=function(e){return new Money(this,e)}